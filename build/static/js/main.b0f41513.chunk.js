(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),i=t(2),o=t(4),u=t.n(o),s="api/persons",d=function(){return u.a.get(s).then((function(e){return e.data}))},m=function(e){return u.a.post(s,e).then((function(e){return e.data}))},j=function(e,n){return u.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return u.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},f=(t(37),t(0)),h=function(e){return Object(f.jsx)("div",{children:e.persons.map((function(n){return Object(f.jsxs)("p",{children:[n.name," ",n.number," ",Object(f.jsx)(O,{id:n.name,name:e.name,click:e.click})]},n.name)}))})},l=function(e){return Object(f.jsxs)(f.Fragment,{children:[e.name," ",Object(f.jsx)("input",{onChange:e.change,value:e.val}),Object(f.jsx)("br",{})]})},O=function(e){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{id:e.id,type:"submit",onClick:e.click,children:e.name})})},p=function(e){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("p",{className:e.className,children:e.message})})},x=function(e){return Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{children:[e.nameInput,e.numberInput]}),Object(f.jsx)("div",{children:e.addButton})]})},g=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(""),o=Object(r.a)(a,2),u=o[0],s=o[1],g=Object(i.useState)(""),v=Object(r.a)(g,2),k=v[0],w=v[1],I=Object(i.useState)([]),S=Object(r.a)(I,2),C=S[0],N=S[1],y=Object(i.useState)(""),D=Object(r.a)(y,2),F=D[0],A=D[1],B=Object(i.useState)("hidden"),E=Object(r.a)(B,2),T=E[0],_=E[1];Object(i.useEffect)((function(){d().then((function(e){c(e),N(e)}))}),[]);var J=function(e){var n;return t.forEach((function(t){n=!!t.name.includes(e)})),n};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{className:T,message:F}),Object(f.jsx)(l,{name:"Filter phonebook: ",change:function(e){N(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value)})))}}),Object(f.jsx)("h2",{children:"Add New Contact"}),Object(f.jsx)(x,{heading:"Add a new contact",nameInput:Object(f.jsx)(l,{name:"name: ",change:function(e){s(e.target.value)},val:u}),numberInput:Object(f.jsx)(l,{name:"number: ",change:function(e){w(e.target.value)},val:k}),addButton:Object(f.jsx)(O,{name:"add",click:function(e){e.preventDefault();var n={name:u,number:k};if(J(n.name)){var a=t.filter((function(e){return e.name===n.name}));a.number!==n.number&&(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?")),j(a[0].id,n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),N(t.map((function(n){return n.id!==e.id?n:e}))),_("good_message"),A("Changed ".concat(n.name,"'s number")),setTimeout((function(){A(""),_("hidden")}),2500)}))),s(""),w("")}J(n.name)||m(n).then((function(e){c(t.concat(e)),N(t.concat(e)),_("good_message"),A("Added ".concat(n.name)),setTimeout((function(){A(""),_("hidden")}),2500),s(""),w("")}))}})}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(h,{persons:C,name:"Delete",click:function(e){e.preventDefault();var n=t.find((function(n){return n.name===e.target.id})),a=n.id;window.confirm("Delete ".concat(n.name,"?")),b(a).then(c(t.filter((function(e){return e.id!==a})))).then(N(t.filter((function(e){return e.id!==a})))).catch((function(e){_("bad_message"),A("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){A(""),_("hidden")}),4e3)}))}})]})};t(39);a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b0f41513.chunk.js.map